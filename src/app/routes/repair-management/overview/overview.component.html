<!--home page for repair -->
<div class="content-area">
  <div class="container">
    <div class="row">


      <div class="col-6 col-sm-4 col-md-3 col-xl-2 text-center">
        <a id="lnk-repair-removals" [routerLink]="['/repair-management', 'removals']">

          <span class="fa-stack fa-4x home-icon" id="spn-repair-removals">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-times-circle-o fa-stack-1x fa-inverse"></i>
          </span>
          <div class="container">
            <label id="lbl-removal">
              REMOVALS</label>
          </div>
        </a>
      </div>

      <div class="col-6 col-sm-4 col-md-3 col-xl-2 text-center">
        <a id="lnk-repair-repairs" [routerLink]="['/repair-management', 'repairs']">

          <span class="fa-stack fa-4x home-icon" id="spn-repair-repairs">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-wrench fa-stack-1x fa-inverse"></i>
          </span>

        </a>
        <div class="container">
          <label id="lbl-repair">
            REPAIRS</label>
        </div>
      </div>

      <div class="col-6 col-sm-4 col-md-3 col-xl-2 text-center">
        <a id="lnk-repair-reports" [routerLink]="['/repair-management', 'reports']">

          <span class="fa-stack fa-4x home-icon" id="spn-repair-reports">
            <i class="fa fa-circle fa-stack-2x"></i>
            <i class="fa fa-file-text-o fa-stack-1x fa-inverse"></i>
          </span>

        </a>
        <div class="container">
          <label id="lbl-report">
            REPORTS
          </label>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Stepper Modal Window -->
<ng-template #removalModal let-c="close" let-d="dismiss" class="modal">
  <div class="hugeModal">
    <div class="modal-header">
      <h6 class="w-100 modal-title text-center">Create Repair</h6>
      <button type="button" id="btn-repair-removal-close" class="cursor-pointer close"
        aria-label="Close" (click)="d('Cross click');searchRepairError=false;">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>

      <mat-horizontal-stepper linear labelPosition="bottom" #stepper class="create-repair mt-4"
      (selectionChange)="selectionChange($event)" (keydown.enter)="$event.preventDefault()">
          <mat-step  [stepControl]="removalObj.formObj">
            <form [formGroup]="removalObj.formObj" (ngSubmit)="removalFormSubmit(stepper, serialNumber.value)">
              <div class="modal-body">
                <ng-template matStepLabel><strong>Removal Information</strong></ng-template>
               
                  <div class="row">
                    <div class="form-group col-12">
                      <div class="input-group">
                        <input ngbAutofocus autofocus class="form-control" autocomplete="off" id="inp-repair-lruserialNumber" #serialNumber
                          formControlName="serialNumber" type="text" name="serialNumber" placeholder="Search serial number..."
                          (keyup)="validationSerialNo(serialNumber.value)">
                        <button class="btn btn-primary" id="btn-removal-go" type="button"  [attr.disabled]="removalObj?.serailNoPattern? '' : null"
                          (click)="getLruSerial(serialNumber.value)"><i class="glyphicon glyphicon-search" aria-hidden="true"
                            *ngIf="removalObj.isLoading" class="fa fa-spinner fa-pulse fa-fw mr-1"></i><span
                            *ngIf="!removalObj.isLoading">Go!</span></button>
                            
                      </div>
                      <div class="invalid-feedback d-inline" *ngIf="!removalObj.isLoading && searchFailed && !serialNumber.value && !searchRepairError">
                        Serial number is required</div>
                        
                        <div *ngIf="removalObj?.serailNoPattern"
                        class="invalid-feedback d-inline"  >
                           Valid special characters are . - _
                         </div>
                      <art-loading [loading]="removalObj.isLoading"></art-loading>
                    </div>
                    <div class="invalid-feedback d-inline ml-3 mr-3" id='no-removal'>
                      <div class="alert alert-warning text-warning" role="alert" *ngIf="searchRepairError">
                        <a (click)='removalObj.isError = false; searchFailed = false;' id="lnk-repair-removal-close"
                          class="close text-warning" data-dismiss="alert" aria-label="close">&times;</a>
                        <strong>No removal found!</strong> No removal record has been found for the corresponding
                        serial number
                      </div>
                    </div>
                  </div>
                  <div class="row" *ngIf="removalObj.enableSerialInfo && !removalObj.isLoading">
                    <div class="form-group col-3">

                      <art-label-value label='DATE' value="{{removalList.removalDate | date: 'MM/dd/yyyy'}}"
                        id="lbl-removal-date"></art-label-value>
                    </div>
                    <div class="form-group col-3">
                      <art-label-value label='MAINTENANCE STATION' value='{{removalList.maintenanceStation?.fullName}}'
                        id="lbl-removal-maintenanceStation"></art-label-value>
                    </div>
                    <div class="form-group col-3">
                      <art-label-value label='AIRLINE' value='{{removalList.airlineName}}' id="lbl-removal-airlineName">
                      </art-label-value>
                    </div>
                    <div class="form-group col-3">
                      <art-label-value label='TAIL' value='{{removalList.tailSign}}' id="lbl-removal-tailSign"></art-label-value>
                    </div>
                  </div>
          
                  <div class="row" ngbAutofocus *ngIf="removalObj.enableSerialInfo && !removalObj.isLoading">
                    <div class="form-group col-3">
                      <art-label-value label='LRU PART NUMBER' value='{{removalList.lruPartNumber?.lruPartNumber}}'
                        id="lbl-removal-lruPartNumber"></art-label-value>
                    </div>
                    <div class="form-group col-3">
                      <art-label-value label='LRU SERIAL NUMBER' value='{{removalList.serialNumberOFF}}'
                        id="lbl-removal-serialNumber"></art-label-value>
                    </div>
                    <div class="form-group col-3">
                      <art-label-value label='REASON OF REMOVAL' value='{{reasonOfRemoval}}'
                        id="lbl-removal-reasonOfRemoval"></art-label-value>
                    </div>
                  </div>
                  <div >
                    <div class="row" *ngIf="removalObj.enableSerialInfo && !removalObj.isLoading">
                      <div class="col-sm-3">
                        <div class="form-group">
                          <label class="mandatory-field" id="lbl-repair-removal-repairstation">REVISION 
						</label>
                          <select name="repairRevisionApi" (change)="getRepairRevisionData()" #repairRevisions formControlName="repairRevisionApi"
                            id="sl-removal-Revision" class="bg-white form-control content-dark repair-repairStation"
                            [ngClass]="{' d-inline': (removalObj.formSubmitted || removalObj.formObj.controls.repairRevisionApi.dirty) && removalObj.formObj.controls.repairRevisionApi.errors }">
                            <option value=''>--Select--</option>
                            <option *ngFor="let rep of revision" [ngValue]="rep">
                              {{rep}}
                            </option>
                          </select>
                         
                        </div>
                        <div class="form-group">
                          <select name="repairRevisionNumber" (change)="getRepairRevisionData()" #repairRevisionNumber id="sl-removal-RevisionNumber"
                            class="form-control content-dark repair-repairStation bg-white" formControlName="repairRevisionNumber">
                            <option value=''>--Select--</option>
                            <option *ngFor="let rep of rev" [ngValue]="rep">
                              {{rep}}
                            </option>
                          </select>
                        </div>
						
						 <div class="invalid-feedback d-inline" *ngIf="!(removalObj?.formObj?.value?.repairRevisionApi + removalObj?.formObj?.value?.repairRevisionNumber) && (removalError)
             " >
                            Repair revision is required
                          </div>
                      </div>
                      <div class="col-sm-9">
                        <div class="form-group removal-mod-dot">
                          <label class="mandatory-field" id="lbl-repair-removal-mod">MOD DOT IN</label>
                          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-toggle mr-2 mod-dot">
                              <label *ngFor="let tp of modIn1" class="btn-outline-secondary mod-dot form-control content-dark"
                                ngbButtonLabel [ngClass]="{'active-btn': modInData.indexOf(tp) > -1}" (mousedown)="modFilterMouseDown(tp)" (mouseup)="modFilterMouseUp()">
                                <input type="checkbox" name="mod" ngbButton formControlName="repairRevision"
                                  (click)="selecteModDotIn(tp)"> {{tp}}
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="form-group removal-mod-dot">
                          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-toggle mr-2">
                              <label *ngFor="let tep of modDot1"
                                class="mod btn-outline-secondary mod-dot form-control content-dark "
                                [ngClass]="{'active-btn': modInData.indexOf(tep) > -1}" ngbButtonLabel
								(mousedown)="modFilterMouseDown(tep)" (mouseup)="modFilterMouseUp()">
                                <input type="checkbox" name="modin" ngbButton formControlName="repairRevision"
                                  (click)="selecteModDotIn(tep)"> {{tep}}
                              </label>
                            </div>
                          </div>
                        </div>
						<div *ngIf="this.modInData && !this.modInData.length && removalError" class="invalid-feedback d-inline">Mod Dot In is required</div>
                      </div>
                    </div>
                  </div>
              </div>
                <div class="modal-footer mt-4">
                  <button type="button" class="btn btn-primary art-button mr-auto" id="btn-removal-createremoval"
                    (click)="getRemovalModal(serialNumber.value)" [disabled]="!searchRepairError">
                    Create Removal
                  </button>
                  <button type="submit" class="btn btn-primary art-button" id="btn-repair-removal-next"
                    mat-button matStepperNext (click)="validateRemovalInfo(stepper)">
                    Next
                  </button>

                </div>
              </form>
          </mat-step>

          <mat-step [stepControl]="repairObj.formObj">
              <form [formGroup]="repairObj.formObj" (ngSubmit)="repairFormSubmit()">
                  <ng-template matStepLabel><strong>Repair Information</strong></ng-template>
                  <div class="modal-body">

                    <div class="row">
                      <div class="form-group col-sm-3">
                        <label class="mandatory-field" id="lbl-repair-removal-repairdate">REPAIR DATE</label>
                        <div class="input-group create-repair-datepicker">
                          <input class="form-control" name="pickerModel" autocomplete="off" formControlName="pickerModel" ngbDatepicker
                            #start="ngbDatepicker"
                            [ngClass]="{ 'd-inline': (repairObj.formSubmitted || repairObj.formObj.controls.pickerModel.dirty) && repairObj.formObj.controls.pickerModel.errors }">
                          <button class="input content-dark cursor-pointer date-range-picker-color" type="button"
                            (click)="start.toggle()">
                            <i class="fa fa-calendar" aria-hidden="true"></i>
                          </button>
                        </div>
                        <div *ngIf="repairObj.formSubmitted && repairObj.formObj.controls.pickerModel.errors"
                          class="invalid-feedback d-inline">
                          <div *ngIf="repairObj.formObj.controls.pickerModel.errors.required">Date is required</div>
                        </div>
                      </div>
                      <div class="form-group col-sm-3">
                        <label class="mandatory-field" id="lbl-repair-removal-repairstation">REPAIR STATION</label>
                        <select name="repairDropDownList" id="sl-repair-removal-repairstation" #repairDropDownList
                          formControlName="repairStation" class="form-control content-dark repair-repairStation"
                          [ngClass]="{ 'd-inline': (repairObj.formSubmitted || repairObj.formObj.controls.repairStation.dirty) && repairObj.formObj.controls.repairStation.errors }"
                          (change)="getReviewModal()">
                          <option value=''>--Select--</option>
                          <option *ngFor="let rep of list" [value]="rep.id">
                            {{rep.fullName}}
                          </option>
                        </select>
                        <div *ngIf="repairObj.formSubmitted && repairObj.formObj.controls.repairStation.errors"
                          class="invalid-feedback d-inline">
                          <div *ngIf="repairObj.formObj.controls.repairStation.errors.required">Repair Station is
                            required</div>
                        </div>
                      </div>
                      <div class="form-group col-sm-3">
                        <label class="mandatory-field" id="lbl-repair-removal-techician">REPAIR TECHNICIAN</label>                        
                        <input type="text" autocomplete="off" id="inp-repair-removal-techician" name="techician"
                          formControlName="techician" class="form-control content-dark"
                          [ngClass]="{ 'invalid-feedback  d-inline': (repairObj.formSubmitted || repairObj.formObj.controls.techician.dirty) && repairObj.formObj.controls.techician.errors }" />
                        <div *ngIf="repairObj.formSubmitted && repairObj.formObj.controls.techician.errors"
                          class="invalid-feedback d-inline">
                          <div *ngIf="repairObj.formObj.controls.techician.errors.required">Techician is required</div>
                        </div>
                        <div>
                        <div *ngIf="repairObj.formObj.controls.techician.errors && repairObj.formObj.controls.techician.errors.maxlength" class="invalid-feedback d-inline" >
                          Repair Techician must be below 45 characters
                        </div>
                        </div>

                      </div>
                      <div class="form-group col-sm-3">
                        <label class="mandatory-field" id="lbl-repair-removal-workOrder">WORK ORDER</label>
                        <input type="text" id="inp-overview-workorder" ngbAutofocus name="workOrder" formControlName="workOrder"
                          autofocus class="form-control content-dark"
                          [ngClass]="{ 'invalid-feedback d-inline': (repairObj.formSubmitted || repairObj.formObj.controls.workOrder.dirty) && repairObj.formObj.controls.workOrder.errors }" />
                        <div *ngIf="repairObj.formSubmitted && repairObj.formObj.controls.workOrder.errors"
                          class="invalid-feedback d-inline">
                          <div *ngIf="repairObj.formObj.controls.workOrder.errors.required">Work Order is required</div>
                        </div>
                        <div>
                        <div *ngIf="repairObj.formObj.controls.workOrder.errors && repairObj.formObj.controls.workOrder.errors.maxlength" class="invalid-feedback d-inline">
                          Work Order must be below 45 characters
                          </div>
                        </div>
                          <div *ngIf="repairObj.formObj.controls.workOrder.errors && repairObj.formObj.controls.workOrder.errors.pattern" class="invalid-feedback d-inline">
                            Valid special characters are . - _
                          </div>
                      </div>
              
                    </div>
                    <!--REPAIR TEYPE-->
                    <div class="pt-4 pb-4">
                      <label id="lbl-repair-removal-repairtype" class="mandatory-field">REPAIR TYPE</label>
                      <div class="radiobtn-repair">
                        <mat-radio-group class="repair-type-radio-group" formControlName="repairType" name="repairType">
                          <mat-radio-button [disableRipple]="false" class="mr-4 repair-type-radio-button removal-radio-btn"
                            [ngClass]="{ 'invalid-feedback d-inline': (repairObj.formSubmitted || repairObj.formObj.controls.repairType.dirty) && repairObj.formObj.controls.repairType.errors }"
                            placeholder="Repair Type" *ngFor="let typ of repairTypes" [value]="typ" id="{{typ.id}}">
                            <span class="font-weight-bolder" [innerHTML]="typ.label"></span><br>
                            <span class="font-weight-light"> {{typ.key}}</span>
                          </mat-radio-button>
                        </mat-radio-group>
                        <div *ngIf="repairObj.formSubmitted && repairObj.formObj.controls.repairType.errors"
                          class="invalid-feedback d-inline">
                          <div *ngIf="repairObj.formObj.controls.repairType.errors.required">Repair Type is required</div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <!--create repair modal footer-->
                  <div class="modal-footer mt-4">
                    <button type="button" class="btn btn-secondary art-button mr-auto" id="btn-repair-removal-cancel"
                      [attr.disabled]="repairModal?.isFormSubmitted"  mat-button matStepperPrevious >Back</button>
                   
                    <button type="submit" class="btn btn-primary art-button" id="btn-repair-repairs-next" (click)="getfaultModal(stepper)"
                      [attr.disabled]="repairModal?.isFormSubmitted" mat-button matStepperNext>
                      Next
                    </button>
                  </div>
                </form>  
          </mat-step>
          <mat-step [stepControl]="faultObj.formObj">
            <ng-template matStepLabel>
              <strong>Repair Details</strong>
            </ng-template>
              <!-- Level 1 -->
              <div *ngIf="repairObj?.formObj?.value?.repairType?.value === 1">
                  <form [formGroup]="faultObj.formObj" (ngSubmit)="faultFormSubmit()">
                      <div class="modal-body">
                        <div class="form-group pb-4">
                          <div>
                            <label class="mandatory-field" id="lbl-repair-removal-fault-comments">COMMENTS / REMARKS</label>
                            <input type="text" name="remarks" class="form-control content-dark p-4" id="inp-fault-remarks"
                              formControlName="remarks" ngbAutofocus
                              [ngClass]="{ 'invalid-feedback d-inline': (faultObj.formSubmitted || faultObj.formObj.controls.remarks.dirty) && faultObj.formObj.controls.remarks.errors }" />
                  
                          </div>
                          <div *ngIf="faultObj.formSubmitted && faultObj.formObj.controls.remarks.errors"
                            class="invalid-feedback d-inline">
                            <div *ngIf="faultObj.formObj.controls.remarks.errors.required">Comments / Remarks is required
                            </div>
                          </div>
                          <div>
                          <div *ngIf="faultObj.formObj.controls.remarks.errors && faultObj.formObj.controls.remarks.errors.maxlength" class="invalid-feedback d-inline">
                            Comments / Remarks must be below 255 characters
                            </div>
                            </div>
                            <div *ngIf="faultObj.formObj.controls.remarks.errors && faultObj.formObj.controls.remarks.errors.pattern" class="invalid-feedback d-inline">
                              Valid special characters are . - _
                            </div>
                        </div>
                        
                      </div>
                      <!--create repair modal footer-->
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary art-button mr-auto" id="btn-repair-removal-cancel"
                          [attr.disabled]="faultModal?.isFormSubmitted"  mat-button matStepperPrevious >Back</button>

                        <button type="submit" class="btn btn-primary art-button" id="btn-repair-fault-next"
                          [attr.disabled]="faultModal?.isFormSubmitted" mat-button matStepperNext>
                          <i *ngIf="faultObj.loadVisible" class="fa fa-spinner fa-pulse fa-fw mr-1"></i> Next
                        </button>
                      </div>
                    </form>
                </div>

                <!-- Level 2 -->
              <div *ngIf="repairObj?.formObj?.value?.repairType?.value === 2">
                <form [formGroup]="repairDetailObj.formObj" (ngSubmit)="repairDetailFormSubmit(stepper)">
                    <div class="modal-body"> 
                      <label class="mandatory-field" id="lbl-repair-removal-repairtype">RESULT</label>
                      <div class="radiobtn-repair">
                        <mat-radio-group class="repair-type-radio-group" formControlName="repairDetailsType" name="repairDetailsType">
                          <mat-radio-button [disableRipple]="false" class="mr-4 repair-type-radio-button removal-radio-btn"
                            [ngClass]="{ 'invalid-feedback d-inline': (repairDetailObj.formSubmitted || repairDetailObj.formObj.controls.repairDetailsType.dirty) && repairDetailObj.formObj.controls.repairDetailsType.errors }"
                            placeholder="repairDetailsType" *ngFor="let lev of repairDetailsType" [value]="lev" id="{{lev.id}}">
                            <span class="font-weight-bolder"> {{lev.label}}</span>
                          </mat-radio-button>
                        </mat-radio-group>
                        <div *ngIf="repairDetailObj.formSubmitted && repairDetailObj.formObj.controls.repairDetailsType.errors"
                          class="invalid-feedback d-inline">
                          <div *ngIf="repairDetailObj.formObj.controls.repairDetailsType.errors.required">Repair details type is
                            required</div>
                        </div>
                      </div>
                      <div class="form-group">
                        <div>
                          <label id="lbl-repair-removal-repairDatails-comments">COMMENTS / REMARKS</label>
                          <input type="text" name="repairDetailsRemark" class="form-control content-dark p-4"
                            id="inp-fault-repairDetailsRemark" formControlName="repairDetailsRemark" ngbAutofocus 
                            [ngClass]="{ 'invalid-feedback d-inline': (repairDetailObj.formSubmitted || repairDetailObj.formObj.controls.repairDetailsRemark.errors) && repairDetailObj.formObj.controls.repairDetailsRemark.errors }"/>
                        </div>
                        <div *ngIf="repairDetailObj.formObj.controls.repairDetailsRemark.errors "
                        class="invalid-feedback d-inline">
                        <div *ngIf="repairDetailObj.formObj.controls.repairDetailsRemark.errors && repairDetailObj.formObj.controls.repairDetailsRemark.errors.maxlength">
                          Comments / Remarks must be below 255 characters
                          </div>
                          <div *ngIf="repairDetailObj.formObj.controls.repairDetailsRemark.errors && repairDetailObj.formObj.controls.repairDetailsRemark.errors.pattern">
                            Valid special characters are . - _
                          </div>
                          </div>
                      </div>
                
                    </div>
                    <!--create repair modal footer-->
                    <div class="modal-footer mt-4">
                      <button type="button"  mat-button matStepperPrevious  class="btn btn-secondary art-button mr-auto" id="btn-repair-repairDetailsRemark-cancel"
                        [attr.disabled]="repairDetailsModal?.isFormSubmitted">Back</button>
                      <button type="submit" mat-button matStepperNext class="btn btn-primary art-button" id="btn-repair-repairDetailsRemark-next"
                        [attr.disabled]="repairDetailsModal?.isFormSubmitted" >
                        Next
                      </button>
                    </div>
                  </form>
              </div>

              <!-- Level 3 -->
              <div *ngIf="repairObj?.formObj?.value?.repairType?.value === 3">
                    <div class="modal-body">

                        <div class="form-group" *ngIf="!levelTwoRepair.getRepairActionsList">
                            <div *ngFor="let obj of levelTwoRepair.repairDetails; let j = index; let last = last;">
                                <div class="col-12 row pl-0">
                                    <div class="col-sm-3">
                                        <label class="mandatory-field" id="lbl-repair-action1">REPAIR ACTION {{j + 1}}</label>                            
                                        <select name="repairAction" [(ngModel)]="obj.repairActionId" class="form-control" id="sel-repair-action"  #repairAction (change)="levelTwoRepair.repairDetails[j].repairActionIdValue = levelTwoRepair.repairActionsList[$event.target.selectedIndex - 1]?.description"
                                        [ngClass]="{ 'invalid-feedback d-inline color-default': !obj.repairActionId && levelTwoRepair.requiredFields.indexOf(j) !== -1}">
                                            <option value="">--Select--</option>
                                            <option *ngFor="let data of levelTwoRepair.repairActionsList; let l = index;" [ngValue]="data.id">
                                                {{data.description}}
                                            </option>
                                        </select>
                                        <div *ngIf="!obj.repairActionId && levelTwoRepair.requiredFields.indexOf(j) !== -1" class="invalid-feedback d-inline">
                                            Repair action is required
                                        </div>
                                    </div>
            
                                    <div class="col-sm-4">
                                        <label id="lbl-serial-no-off">SRU SERIAL NUMBER OFF / REMOVED</label>
                                        <input (keyup)="validation(obj.sruSerialNumberOff , j, 'off')" type="text" #sruSerialNumberOff="ngModel"
                                        name="sruSerialNumberOff" pattern="/^[_.a-z0-9-]+([-.][a-z0-9]+)*$/"   maxlength="45" [(ngModel)]="obj.sruSerialNumberOff" class="form-control" id="inp-serialno-off" />
                                        <div>
                                        <div class="invalid-feedback d-inline" *ngIf="obj.sruSerialNumberOff?.length >= 45">
                                          Sru Serial Number Of  must be below 45 characters.
                                        </div>
                                        </div>
                                        <div  class="invalid-feedback d-inline" *ngIf="levelTwoPatternValidation.off[j]">
                                          Valid special characters are . - _
                                        </div>
                                    </div>
                                    
                                    <div class="col-sm-4">
                                        <label id="lbl-serial-no-on">SRU SERIAL NUMBER ON / INSTALLED</label>
                                        <input (keyup)="validation(obj.sruSerialNumberOn , j, 'on')" type="text" name="sruSerialNumberOn" maxlength="45" [(ngModel)]="obj.sruSerialNumberOn" class="form-control" id="inp-serialno-off" />
                                        <div>
                                        <div  class="invalid-feedback d-inline" *ngIf="obj.sruSerialNumberOn?.length >= 45">
                                          Sru Serial Number On  must be below 45 characters.
                                        </div>
                                      </div>
                                        <div  class="invalid-feedback d-inline" *ngIf="levelTwoPatternValidation.on[j]">
                                          Valid special characters are . - _
                                        </div>
                                    </div>
                                    <div class="col-sm-1">
                                        <label>&nbsp;</label>
                                        <div class="d-flex">
                                            <!-- <span class="col-sm-12 pl-4">&nbsp;&nbsp;</span> -->
                                            <span class="form-control art-button btn-secondary cursor-pointer" *ngIf="levelTwoRepair.repairDetails.length !== 5"
                                             (click)="addDeleteRepair('add')" >
                                                <i class="fa fa-plus f-size-10" aria-hidden="true"></i>
                                            </span>
                                            &nbsp;&nbsp;&nbsp;
                                            <span class="form-control art-button btn-secondary cursor-pointer" *ngIf="levelTwoRepair.repairDetails.length !== 1" (click)="addDeleteRepair('delete', j)">
                                                X
                                            </span> 
                                        </div>
                                    </div>
                                
                                </div>
                            </div>
                            <div class="col-12 p-3 col-sm-12"></div>
                            <div>
                                <label class="mandatory-field">COMMENTS / REMARKS</label>
                                <textarea (keyup)="validation(levelTwoRepair.comments, '', 'comm')" [ngClass]="{ 'invalid-feedback d-inline color-default': !levelTwoRepair.comments && levelTwoRepair.isFormSubmitted}"
                                id="txt-repair-level-comments" class="form-control repair-comments" name="comments" autocomplete="off" [(ngModel)]="levelTwoRepair.comments"></textarea>
                                
                                <div>
                                  <div  class="invalid-feedback d-inline" *ngIf="levelTwoRepair.comments?.length >= 255" >
                                Comments / Remarks must be below 255 characters 
                              </div>
                              </div>
                              <div  class="invalid-feedback d-inline" *ngIf="levelTwoPatternValidation.comm">
                                Valid special characters are . - _
                              </div>
                              
                              </div>            
                        </div>
                        <art-loading [loading]="levelTwoRepair.getRepairActionsList"></art-loading>
                    </div>
                    <div class="modal-footer col-12">
            
                        <button type="button" class="btn btn-secondary art-button mr-auto" id="btn-level2-back" mat-button matStepperPrevious >
                            Back
                        </button>
           
                        <button type="button" mat-button matStepperNext class="btn btn-primary art-button" id="btn-level2-next" (click)="getRepairActionDetailsSubmit(stepper)">
                            Next
                        </button>
            
                    </div>
                </div>
          </mat-step>
          <mat-step [stepControl]="modObj.formObj">
            <ng-template matStepLabel>
                <strong>Mod Dot Out</strong>
            </ng-template>
            <div>
              <form [formGroup]="modObj.formObj" (ngSubmit)="modFormSubmit(stepper)">
                  <div class="modal-body">
                    <div class="form-group row">
                      <div class="col-sm-9 ">
                        <div class="form-group removal-mod-dot">
                          <label class="mandatory-field" id="lbl-repair-removal-mod">MOD DOT IN</label>
                          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-toggle mr-2 mod-dot">
                              <label *ngFor="let tp of modIn1" id="lbl-repair-mod-in"
                                class="btn-outline-secondary mod-dot form-control content-dark cursor-default" ngbButtonLabel
                                [ngClass]="{'active-btn': modInData.indexOf(tp) > -1}">
                                <input type="checkbox" name="mod" ngbButton [attr.disabled]="true" formControlName="repairRevision"
                                  > {{tp}}
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="form-group removal-mod-dot">
                          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-toggle mr-2">
                              <label *ngFor="let tep of modDot1" id="lbl-repair-mod-in"
                                class="mod btn-outline-secondary mod-dot form-control content-dark cursor-default"
                                [ngClass]="{'active-btn': modInData.indexOf(tep) > -1}" ngbButtonLabel>
                                <input type="checkbox" name="modin" id="inp-repair-moddotin" [attr.disabled]="true" ngbButton
                                  formControlName="repairRevision"  class="cursor-auto"> {{tep}}
                              </label>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div class="form-group row">
                      <div class="col-sm-9 ">
                        <div class="form-group removal-mod-dot">
                          <label class="mandatory-field" id="lbl-repair-removal-moddotout">MOD DOT OUT</label>
                          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-toggle mr-2 mod-dot">
                              <label *ngFor="let tp of modIn1" class="btn-outline-secondary mod-dot form-control content-dark"
                                [ngClass]="{'active-btn': modOutData.indexOf(tp) > -1}"  (mousedown)="modFilterMouseDown(tp)" (mouseup)="modFilterMouseUp()" ngbButtonLabel>
                                <input type="checkbox" name="mod" id="inp-repair-mod-dot-out" ngbButton
                                  formControlName="repairRevision" (click)="selectedBtnOut(tp)"> {{tp}}
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="form-group removal-mod-dot">
                          <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                            <div class="btn-group btn-group-toggle mr-2">
                              <label *ngFor="let tep of modDot1" class="mod btn-outline-secondary mod-dot form-control content-dark "
                                [ngClass]="{'active-btn': modOutData.indexOf(tep) > -1}"  (mousedown)="modFilterMouseDown(tep)" (mouseup)="modFilterMouseUp()" ngbButtonLabel>
                                <input type="checkbox" name="modin" id="inp-repair-mod-dot-out" ngbButton
                                  formControlName="repairRevision" (click)="selectedBtnOut(tep)"> {{tep}}
                              </label>
                            </div>
                          </div>
                        </div>
                        <div class="invalid-feedback d-inline" *ngIf="!modOutData.length">Mod Dot Out is required</div>
                      </div>
                      
                    </div>
                  </div>
              
                  <!--create repair modal footer-->
                  <div class="modal-footer">
                    <button type="button" mat-button matStepperPrevious class="btn btn-secondary art-button mr-auto" id="btn-repair-mod-dotout-removal-cancel"
                      [attr.disabled]="modModal?.isFormSubmitted">Back</button>
                    <button type="submit" class="btn btn-primary art-button" (click)="getReviewModal()"
                      id="btn-repair-repairs-moddotout-next" mat-button matStepperNext [attr.disabled]="modModal?.isFormSubmitted">
                      Next
                    </button>
                  </div>
                </form>
            </div>
          </mat-step>

          <mat-step [stepControl]="reviewObj.formObj">
              <ng-template matStepLabel>
                  <strong>Summary</strong>
              </ng-template>
              <div>
                  <form [formGroup]="reviewObj.formObj" (ngSubmit)="reviewFormSubmit()">
                        <div class="alert alert-danger mr-4 ml-4" *ngIf="reviewObj.formObj.isError">
                          <a (click)='reviewObj.formObj.isError = false' class="close" data-dismiss="alert">&times;</a>
                          <span *ngIf="reviewObj.formObj.errorMsg">{{reviewObj.formObj.errorMsg}}</span>
                        </div>
                      <div id="print-repair-info" class="modal-body pt-0 stepper-modal-content-scroll" ngbAutofocus>
                       
                        <art-section-title [sectionTitle]="['REMOVAL DETAILS']"></art-section-title>
                        <div class="row" ngbAutofocus>
                          <div class="form-group col-3">
                            <art-label-value label='DATE' value="{{removalList.removalDate | date: 'MM/dd/yyyy'}}"
                              id="lbl-review-date"></art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='MAINTENANCE STATION' value='{{removalList.maintenanceStation?.fullName}}'
                              id="lbl-review-maintenanceStation"></art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='AIRLINE' value='{{removalList.airlineName}}' id="lbl-review-airlineName">
                            </art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='TAIL' value='{{removalList.tailSign}}' id="lbl-review-tailSign"></art-label-value>
                          </div>
                        </div>

                        <div class="row" ngbAutofocus>
                          <div class="form-group col-3">
                            <art-label-value label='LRU PART NUMBER' value='{{removalList.lruPartNumber?.lruPartNumber}}'
                              id="lbl-review-lruPartNumber"></art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='LRU SERIAL NUMBER' value='{{removalList.serialNumberOFF}}'
                              id="lbl-review-serialNumber"></art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='REASON OF REMOVAL' value='{{reasonOfRemoval}}'
                              id="lbl-review-reasonOfRemoval"></art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='REVISION' value='{{summaryRevision}}' id="lbl-review-revision"></art-label-value>
                          </div>
                        </div>
                        <div class="form-group row">
                          <div class="col-sm-9">
                            <div class="form-group removal-mod-dot">
                              <label id="lbl-repair-removal-mod">MOD DOT IN</label>
                              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                                <div class="btn-group btn-group-toggle mr-2 mod-dot ">
                                  <label *ngFor="let tp of modIn1" id="lbl-review-mod-dot-in"
                                    class="btn-outline-secondary mod-dot form-control content-dark cursor-default" ngbButtonLabel
                                    [ngClass]="{'active-btn': modInData.indexOf(tp) > -1}">
                                    <input type="checkbox" name="mod" id="inp-review-mod-dot-in" [attr.disabled]="true" ngbButton
                                      formControlName="repairRevision"> {{tp}}
                                  </label>
                                </div>
                              </div>
                            </div>
                            <div class="form-group removal-mod-dot">
                              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                                <div class="btn-group btn-group-toggle mr-2">
                                  <label *ngFor="let tep of modDot1" id="lbl-review-mod-dot-in"
                                    class="mod btn-outline-secondary mod-dot form-control content-dark cursor-default"
                                    [ngClass]="{'active-btn': modInData.indexOf(tep) > -1}" ngbButtonLabel>
                                    <input type="checkbox" name="modin" id="inp-review-mod-dot-in" [attr.disabled]="true" ngbButton
                                      formControlName="repairRevision"> {{tep}}
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>

                        <art-section-title [sectionTitle]="['REPAIR DETAILS']"></art-section-title>
                        <div class="row" ngbAutofocus>
                          <div class="form-group col-3">                            
                            <art-label-value label='DATE' [format]='labelValueFormat'
                              value="{{repairObj.formObj.value.repairDates | date : 'MM/dd/yyyy'}}"
                              id="lbl-review-date"></art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='REPAIR STATION' value='{{selectedRepairStation}}' id="lbl-review-date">
                            </art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='REPAIR TECHNICIAN' value='{{repairObj.formObj.value.techician}}' id="lbl-review-date">
                            </art-label-value>
                          </div>
                          <div class="form-group col-3">
                            <art-label-value label='WORK ORDER' value='{{repairObj.formObj.value.workOrder}}' id="lbl-review-date">
                            </art-label-value>
                          </div>
                        </div>
                  
                        
                  
                        <div *ngIf="repairTypeLevel === 1">
                          <art-section-title [sectionTitle]="['NO FAULT FOUND DETAILS']"></art-section-title>
                          <div class="form-group">
                            <div class="col-sm-12 row">
                              <art-label-value label='COMMENTS / REMARKS' value="{{faultObj?.formObj?.value?.remarks}}"></art-label-value>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="repairTypeLevel === 2">
                          <art-section-title [sectionTitle]="['LEVEL 1 REPAIR DETAILS']"></art-section-title>
                          <div class="form-group">
                            <div class="col-sm-6 row">
                              <art-label-value label='RESULT' value="{{repairDetailObj?.formObj?.value?.repairDetailsType?.id}}">
                              </art-label-value>
                            </div>
                          </div>
                          <div class="form-group">
                            <div class="col-sm-6 row">
                              <art-label-value label='COMMENTS / REMARKS' value="{{repairDetailObj?.formObj?.value?.repairDetailsRemark}}">
                              </art-label-value>
                            </div>
                          </div>
                        </div>
                          <!--  LEVEL 2 Repair Details -->
                          <div *ngIf="repairTypeLevel === 3">
                              <art-section-title [sectionTitle]="['LEVEL 2 REPAIR DETAILS']"></art-section-title>
                              <div class="form-group">
                                  <div class="row" *ngFor="let repairactios of levelTwoRepair.repairDetails;let i = index;">
                                      <div class="col-4 mt-2">
                                          <art-label-value label='REPAIR ACTION {{i + 1}}' value="{{repairactios.repairActionIdValue}}">
                                          </art-label-value>
                                      </div>
                                      <div class="col-4 mt-2">
                                          <art-label-value label='SRU SERIAL NUMBER OFF / REMOVED' value="{{repairactios.sruSerialNumberOff}}">
                                          </art-label-value>
                                      </div>
                                      <div class="col-4 mt-2">
                                          <art-label-value label='SRU SERIAL NUMBER ON / INSTALLED
                                          ' value="{{repairactios.sruSerialNumberOn}}">
                                          </art-label-value>
                                      </div>
                                  </div>
                              </div>
                              <div class="form-group">
                                  <div>
                                  <art-label-value label='COMMENTS / REMARKS' value="{{levelTwoRepair.comments}}">
                                  </art-label-value>
                                  </div>
                              </div>
                          </div>
                          
                        <art-section-title [sectionTitle]="['MOD DOT OUT']"></art-section-title>
                        <div class="form-group row">
                          <div class="col-sm-9">
                            <div class="form-group removal-mod-dot">
                              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                                <div class="btn-group btn-group-toggle mr-2 mod-dot">
                                  <label *ngFor="let tp of modIn1" id="lbl-review-mod-dot-out"
                                    class="btn-outline-secondary mod-dot form-control content-dark cursor-default"
                                    [ngClass]="{'active-btn': modOutData.indexOf(tp) > -1}" ngbButtonLabel>
                                    <input type="checkbox" name="mod" id="inp-review-mod-dot-out" [attr.disabled]="true" ngbButton
                                      formControlName="repairRevision" > {{tp}}
                                  </label>
                                </div>
                              </div>
                            </div>
                            <div class="form-group removal-mod-dot">
                              <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                                <div class="btn-group btn-group-toggle mr-2">
                                  <label *ngFor="let tep of modDot1" id="lbl-review-mod-dot-out"
                                    class="mod btn-outline-secondary mod-dot form-control content-dark cursor-default"
                                    [ngClass]="{'active-btn': modOutData.indexOf(tep) > -1}" ngbButtonLabel>
                                    <input type="checkbox" name="modin" id="inp-review-mod-dot-out" [attr.disabled]="true" ngbButton
                                      formControlName="repairRevision">
                                    {{tep}}
                                  </label>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!--create repair modal footer-->
                      <div class="modal-footer" >
                          <button type="button" *ngIf="!enablePrint" class="btn btn-secondary art-button mr-auto mat-button" id="btn-repair-review-back"
                          [attr.disabled]="reviewModal?.isFormSubmitted" mat-button matStepperPrevious>Back</button>
                            
                          <button *ngIf="!enablePrint" type="submit"  mat-button matStepperNext class="btn btn-primary art-button" id="btn-repair-repairs-save"
                            [attr.disabled]="reviewModal?.isFormSubmitted">
                            <i *ngIf="reviewObj?.isFormSubmitted" class="fa fa-spinner fa-pulse fa-fw mr-1"></i>
                            Save Repair
                          </button>
                          
                          <div *ngIf="enablePrint">
                              <button type="button" (click)="printRepair('print-repair-info')" class="btn btn-primary art-button" id="btn-repair-repairs-print"
                               >
                                Print
                              </button>
                          </div>

                      </div>
                    </form>
              </div>
          </mat-step>
      </mat-horizontal-stepper>

  </div>
</ng-template>
<!-- Stepper Modal Window -->

<!--  createremovalmodal information -->
<ng-template #createRemovalModal let-c="close" let-d="dismiss" class="modal">
    <div class="modal-header">
      <h6 class="w-100 modal-title text-center" ngbAutofocus>Create Removal</h6>
      <button type="button" [attr.disabled]="createRemovalModal.isFormSubmitted" id="btn-Createremoval-close" class="close"
        aria-label="Close" (click)="d('Cross click');commonObj.getCreateRepairInfo = [];">
        <span aria-hidden="true">&times;</span>
      </button>
    </div>
  
    <!--create removal modal form-->
  <art-loading [loading]="commonObj.getCreateRepairInfo.length !== 3"></art-loading>
  
  <div *ngIf="commonObj.getCreateRepairInfo.length === 3">
    <form [formGroup]="createRemovalObj.formObj" (ngSubmit)="createFormSubmit()">
      <div class="modal-body">
        <div class="row">
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-Createremoval-repairdate">REMOVAL DATE</label>
            <div class="input-group create-repair-datepicker">
              <input class="form-control" placeholder="Removal Date" autocomplete="off" id="inp-createremoval-pickermodal" name="pickerModel" formControlName="pickerModel"
                ngbDatepicker #start="ngbDatepicker"
                [ngClass]="{ 'd-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.pickerModel.dirty) && createRemovalObj.formObj.controls.pickerModel.errors }">
              <button class="input content-dark cursor-pointer date-range-picker-color" type="button"
                (click)="start.toggle()">
                <i class="fa fa-calendar" aria-hidden="true"></i>
              </button>
            </div>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.pickerModel.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.pickerModel.errors.required">Date is required</div>
            </div>
          </div>
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-removal-maintenanceStation">MAINTENANCE STATION</label>
            <select name="maintenanceSation" id="sl-repair-removal-maintenanceStation" #maintenanceSation
              formControlName="maintenanceSation" class="form-control content-dark"
              [ngClass]="{ ' d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.maintenanceSation.dirty) && createRemovalObj.formObj.controls.maintenanceSation.errors }">
              <option value=''>--Select--</option>
              <option *ngFor="let re of maintenancedata" [value]="re.id">
                {{re.fullName}}
              </option>
            </select>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.maintenanceSation.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.maintenanceSation.errors.required">Maintenance
                Station
                is required</div>
            </div>
          </div>
  
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-removal-repairAiline">AIRLINE</label>
            <select name="repairAiline" id="sl-repair-removal-repairAiline"
              (change)="getAircraftList($event.target.value)" #repairAiline formControlName="repairAiline"
              class="form-control content-dark repair-repairStation"
              [ngClass]="{ ' d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.repairAiline.dirty) && createRemovalObj.formObj.controls.repairAiline.errors }">
              <option value=''>--Select--</option>
              <option *ngFor="let air of airData" [value]="air.icao">
                {{air.name}}
              </option>
            </select>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.repairAiline.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.repairAiline.errors.required"> Airline is
                required</div>
            </div>
          </div>
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-removal-repairTail">TAIL</label>
            <select *ngIf="tailsData" id="sl-repair-removal-repairTail" name="repairTail" #repairTail
              formControlName="repairTail" class="form-control content-dark repair-repairStation"
              [ngClass]="{ ' d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.repairTail.dirty) && createRemovalObj.formObj.controls.repairTail.errors }">
              <option value=''>--Select--</option>
              <option *ngFor="let tai of tailsData" [value]="tai.id">
                {{tai.tailNumber}}
              </option>
            </select>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.repairTail.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.repairTail.errors.required"> Tail is
                required</div>
            </div>
          </div>
        </div>
        <div class="row" ngbAutofocus>
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-removal-repairlruName">LRU NAME</label>
            <select name="repairlruName" id="sl-repair-removal-repairlruName" #repairlruName
              formControlName="repairlruName" class="form-control content-dark repair-repairStation"
              [ngClass]="{ ' d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.repairlruName.dirty) && createRemovalObj.formObj.controls.repairlruName.errors }"
              (change)="getLruPartNumberList($event.target.value)">
              <option value=''>--Select--</option>
              <option *ngFor="let lr of lurNameData" [value]="lr.id">
                {{lr.name}}
              </option>
            </select>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.repairlruName.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.repairlruName.errors.required">LRU Name is
                required</div>
            </div>
          </div>
  
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-removal-repairlruPartNumber">LRU PART NUMBER
            </label>
            <select [attr.disabled]="createRemovalObjects.loadLruPartNo ? '' : null" (change)="reasonRemovalList($event.target.value)" name="repairlruPartNumber" id="sl-repair-removal-repairlruPartNumber" #repairlruPartNumber
              formControlName="repairlruPartNumber" class="form-control content-dark repair-repairStation"
              [ngClass]="{ 'd-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.repairlruPartNumber.dirty) && createRemovalObj.formObj.controls.repairlruPartNumber.errors }">
              <option value=''>--Select--</option>
              <option *ngFor="let par of LruNumberData" [value]="par.id">
                {{par.lruPartNumber}}
              </option>
            </select>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.repairlruPartNumber.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.repairlruPartNumber.errors.required">LRU Part
                Number
                is
                required</div>
            </div>
          </div>
          <div class="form-group col-sm-3">
            <label class="mandatory-field" id="lbl-repair-removal-repairReasonOfRemoval">REASON OF REMOVAL
            </label>
            <select [attr.disabled]="createRemovalObjects.loadReasonOfRemoval ? '' : null" name="repairReasonOfRemoval" id="sl-repair-removal-repairReasonOfRemoval" #repairReasonOfRemoval
              formControlName="repairReasonOfRemoval" class="form-control content-dark repair-repairStation"
              [ngClass]="{ ' d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.repairReasonOfRemoval.dirty) && createRemovalObj.formObj.controls.repairReasonOfRemoval.errors }">
              <option value=''>--Select--</option>
              <option *ngFor="let li of ReasonData" [value]="li.id">
                {{li.description}}
              </option>
            </select>
            <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.repairReasonOfRemoval.errors"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.formObj.controls.repairReasonOfRemoval.errors.required">Reason Of
                Removal
                is
                required</div>
            </div>
          </div>
        </div>
        <div class="form-group">
          <div>
            <label class="mandatory-field col-12 row" id="lbl-repair-createRemoval-lruserial">LRU SERIAL NUMBER</label>
            <input type="text" name="lruSerialNumber" autocomplete="off" class="form-control content-dark col-6"
              id="inp-createremoval-lurserial-name" formControlName="lruSerialNumber" ngbAutofocus
              [ngClass]="{ 'invalid-feedback d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.lruSerialNumber.dirty) && createRemovalObj.formObj.controls.lruSerialNumber.errors }" />
            <p class="text-danger" *ngIf="createRemovalObj.isError" class="col-12 row invalid-feedback d-block">
              {{createRemovalObj.errorMsg}}</p>
  
          </div>
          <div *ngIf="createRemovalObj.formSubmitted && createRemovalObj.formObj.controls.lruSerialNumber.errors"
            class="invalid-feedback d-inline">
            <div *ngIf="!createRemovalObj.isError && createRemovalObj.formObj.controls.lruSerialNumber.errors.required">
              LRU
              Serial Number
              is
              required
            </div>
          </div>
          <div>
          <div
          *ngIf="!createRemovalObj.isError && createRemovalObj.formObj.controls.lruSerialNumber.errors && createRemovalObj.formObj.controls.lruSerialNumber.errors.maxlength" class="invalid-feedback d-inline ">
          Lru Serial Number must be below 60 characters
        </div>
        </div>
        <div 
        *ngIf="!createRemovalObj.isError && createRemovalObj.formObj.controls.lruSerialNumber.errors && createRemovalObj.formObj.controls.lruSerialNumber.errors.pattern" class="invalid-feedback d-inline mb-3">
        Valid special characters are . - _
      </div>
        </div>
      
        <div class="">
          <div class="row">
            <div class="col-sm-3">
              <div class="form-group">
                <label class="mandatory-field" id="lbl-repair-removal-repairRevisionApi">REVISION</label>
                <select name="repairRevisionApi" id="sl-repair-removal-repairRevisionApi" #repairRevisions
                  formControlName="repairRevisionApi" class="form-control content-dark repair-repairStation"
                  [ngClass]="{' d-inline': (createRemovalObj.formSubmitted || createRemovalObj.formObj.controls.repairRevisionApi.dirty) && createRemovalObj.formObj.controls.repairRevisionApi.errors }">
                  <option value=''>--Select--</option>
                  <option *ngFor="let rep of revision" [value]="rep">
                    {{rep}}
                  </option>
                </select>

              </div>
              <div class="form-group">
                <select name="repairRevisionNumber" id="sl-repair-removal-repairRevisionNumber" #repairRev
                  class="form-control content-dark repair-repairStation" formControlName="repairRevisionNumber">
                  <option value=''>--Select--</option>
                  <option *ngFor="let rep of rev" [value]="rep">
                    {{rep}}
                  </option>
                </select>
                <div class="invalid-feedback d-inline" 
                *ngIf="createRemovalObj.formSubmitted && (!createRemovalObj?.formObj?.value?.repairRevisionNumber && !createRemovalObj?.formObj?.value?.repairRevisionApi) ">
                Revision is required</div>
              </div>
              
            </div>
            <div class="col-sm-9">
              <div class="form-group removal-mod-dot">
                <label class="mandatory-field" id="lbl-repair-removal-mod">MOD DOT IN</label>
                <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
                  <div class="btn-group btn-group-toggle mr-2 mod-dot">
                    <label *ngFor="let tp of modIn1" class="btn-outline-secondary mod-dot form-control content-dark "
                      (mousedown)="modFilterMouseDown(tp)" (mouseup)="modFilterMouseUp()"
                      [ngClass]="{'inactive-mouse-down': modMouseDownFilter === tp && modInActiveFilterMouseDown, 'active-mouse-down': modFilter === tp && modActiveFilterMouseDown, 'active': modFilter === tp && !modActiveFilterMouseDown, 'active-btn': empMod.indexOf(tp) > -1}"
                      ngbButtonLabel id="mod-dot-in-{{tp}}">
                      <input type="checkbox" name="mod" ngbButton formControlName="repairRevision"
                        (click)="selectedBtn(tp)"> {{tp}}
                    </label>
                  </div>
                </div>
              </div>
              <div class="form-group removal-mod-dot">
                <div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
  
                  <div class="btn-group btn-group-toggle mr-2">
                    <label *ngFor="let tep of modDot1" class="mod btn-outline-secondary mod-dot form-control content-dark"
                      (mousedown)="modFilterMouseDown(tep)" (mouseup)="modFilterMouseUp()"
                      [ngClass]="{'inactive-mouse-down': modMouseDownFilter === tep && modInActiveFilterMouseDown, 'active-mouse-down': modFilter === tep && modActiveFilterMouseDown, 'active': modFilter === tep && !modActiveFilterMouseDown, 'active-btn': empMod.indexOf(tep) > -1}"
                      ngbButtonLabel id="mod-dot-out-{{tep}}">
                      <input type="checkbox" name="modin" ngbButton formControlName="repairRevision" (click)="selectedBtn(tep)">
                      {{tep}}
                    </label>
                </div>
  
                <div *ngIf="createRemovalObj.formSubmitted && (createRemovalObj.formObj.controls.repairRevision.errors || createRemovalObj.modDotInRequired)"
              class="invalid-feedback d-inline">
              <div *ngIf="createRemovalObj.modDotInRequired || createRemovalObj.formObj.controls.repairRevision.errors.required">Mod Dot In
                is
                required</div>
            </div>
               
              </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer form-group">
        <button type="button" class="btn btn-secondary art-button" id="btn-Createremoval-createremoval-cancel"
          [attr.disabled]="createRemovalModal.isFormSubmitted" (click)="c('Cross click');">Cancel</button>
        <button type="submit" class="btn btn-primary art-button" id="btn-Createremoval-createremoval-saveremoval"
          [attr.disabled]="createRemovalModal.isFormSubmitted">
          <i *ngIf="createRemovalObj.loadVisible" class="fa fa-spinner fa-pulse fa-fw mr-1"></i>
  
          Save Removal </button>
      </div>
    </form>
  </div>
  
  </ng-template>


<art-action-toolbar [config]="actionToolBarConfig" (actionToolBarEvent)="getEvent($event)"></art-action-toolbar>
